<!-- Email Modal -->
<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden" id="emailModal" tabindex="-1" aria-labelledby="emailModalLabel" aria-hidden="true">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-md mx-auto">
    <div class="flex items-center justify-between px-6 py-4 border-b">
      <h5 class="text-lg font-semibold text-center flex-1" id="emailModalLabel">Send this coupon/card as an email:</h5>
      <button type="button" class="text-gray-400 hover:text-gray-600" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="px-6 py-4">
      <%= form_tag email_card_path, class: "space-y-4" do %>
        <div>
          <%= text_field_tag(:email, nil, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300", placeholder: "Enter Email Address", required: true) %>
        </div>
        <div>
          <%= recaptcha_tags site_key: ENV["RECAPTCHA_SITE_KEY"] %>
        </div>
        <div>
          <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition" name="submit">
            <i class="fas bi bi-envelope"></i> EMAIL COUPON
          </button>
        </div>
        <p class="hidden"> <!--honeytrap-->
          <label for="address" class="address">If you are a human, don't fill out this field!</label>
          <input name="address" type="text" id="address" maxlength="50"/>
        </p>
      <% end %>
      <p class="text-center text-sm text-gray-500 mt-2"><i>*If you do not see the email in your inbox please check your spam folder.</i></p>
      <script type="text/javascript">
        function checkEmail() {
          var email = document.getElementById('email');
          var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
          if (!filter.test(email.value)) {
            alert('Please provide a valid email address');
            email.focus;
            return false;
          }
        }
      </script>
    </div>
    <div class="px-6 py-4 border-t flex justify-end">
      <button type="button" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded transition" data-bs-dismiss="modal">Close</button>
    </div>
  </div>
</div>